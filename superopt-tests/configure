#!/bin/bash

name=superopt-tests

source_dir=${PWD}
build_dir=${PWD}/build
SUPEROPT_PROJECT_DIR=${SUPEROPT_PROJECT_DIR:-$(realpath ${source_dir}/../)}

config_host_mak="${source_dir}/config-host.mak"
config_mak="${build_dir}/config.mak"

##make build directory
mkdir -p $build_dir

#make config-host.mak
echo "# Automatically generated by configure - do not modify" > $config_host_mak
echo "# Configured with: $0 $@" >> $config_host_mak
echo "NAME=${name}" >> $config_host_mak
echo "SRCDIR=${source_dir}" >> $config_host_mak
echo "BUILDDIR=${build_dir}" >> $config_host_mak
echo "SUPEROPT_PROJECT_DIR=${SUPEROPT_PROJECT_DIR}" >> $config_host_mak

#make config.mak
echo "include ${source_dir}/config-host.mak" > $config_mak
